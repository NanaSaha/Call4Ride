<!-- <ion-header>
  <ion-toolbar>
    <ion-title>user</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

</ion-content> -->
<ion-header>
    <ion-toolbar class="titleBg">
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Register Users</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="automaticClose = !automaticClose">
                <ion-icon slot="icon-only" name="close" *ngIf="automaticClose"></ion-icon>
                <ion-icon slot="icon-only" name="resize" *ngIf="!automaticClose"></ion-icon>
            </ion-button>
            <ion-button (click)="presentActionSheet()">
                <ion-icon name="ellipsis-vertical" slot="icon-only"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-row>
    <ion-col class="ion-text-center">
        <h2>Register Users</h2>
    </ion-col>
</ion-row>
<ion-row>
    <ion-col>
        <ion-searchbar placeholder="find users"></ion-searchbar>
    </ion-col>
</ion-row>
<ion-content>
    <ion-list *ngFor="let item of userdatas; let i = index" class="accordion-list" lines="none" detail="false" no-padding>
        <ion-item tappable (click)="toggleSelection(i)" [ngClass]="{'section-active':item.open, 'section':!item.open}">
            <ion-icon slot="start" name="arrow-forward" *ngIf="!item.open"></ion-icon>
            <ion-icon slot="start" name="arrow-down" *ngIf="item.open"></ion-icon>
            <ion-label>
                {{item.firstName +" "+item.lastName}}
            </ion-label>
            <ion-label slot="end">
                <!-- Role: {{item.entryDate | date: 'M/dd/yyyy'}} -->
                Role: {{item.role}}
            </ion-label>
        </ion-item>

        <ion-grid *ngIf="item.open" class="section-header">
            <ion-row no-padding align-items-center>
                <ion-col size="12">
                    <ion-row no-padding>
                        <!-- <ion-col size="4">
                            <ion-item>
                                <ion-button size="small" color="primary" slot="start">
                                    Assign Job
                                    <ion-icon name="search-circle" slot="end"></ion-icon>
                                </ion-button>
                            </ion-item>
                        </ion-col> -->
                        <ion-col>
                            <ion-item>
                                <ion-label color="primary">User Role</ion-label>
                                <ion-select placeholder="Select a role" [value]="item.role" (ionChange)="onSelectChange($event,item)">
                                    <ion-select-option value="admin">Admin</ion-select-option>
                                    <ion-select-option value="user">user</ion-select-option>
                                </ion-select>
                            </ion-item>
                        </ion-col>
                        <!-- <ion-col size="3.5">
                            <ion-item>
                                <ion-button size="small" color="primary" (click)="viewOnMap(item,i)">
                                    View map
                                    <ion-icon name="map" slot="end"></ion-icon>
                                </ion-button>
                            </ion-item>
                        </ion-col> -->
                    </ion-row>

                </ion-col>
            </ion-row>
        </ion-grid>

        <div *ngIf="item.open">
            <app-user-data [userdata]="item"></app-user-data>
        </div>
    </ion-list>

</ion-content>